(self["webpackChunkweb_vue3"]=self["webpackChunkweb_vue3"]||[]).push([[747],{4029:(e,t,o)=>{"use strict";o.d(t,{dE:()=>s,IK:()=>n});var l=o(1082);let s=e=>l.ZP.formatDate(new Date(e),"YYYY/MM/DD - HH:mm:ss");function a(e){let t=new Date,o=l.ZP.getDateDiff(t,e,"minutes");return 0==o?"刚刚":o<60?o+"分钟前":o<1440?l.ZP.getDateDiff(t,e,"hours")+"小时前":l.ZP.getDateDiff(t,e,"days")+"天前"}let n=e=>a(e)},7590:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});var l=o(3673),s=o(2323);const a=(0,l.aZ)({expose:[],props:{tip:{type:String},delay:{type:Number,default:100},offset:{type:Array,default:()=>[0,8]}},setup(e){return(t,o)=>{const a=(0,l.up)("q-tooltip");return(0,l.wg)(),(0,l.j4)(a,{id:"chiptip",delay:e.delay,offset:e.offset,class:"bg-grey-12 text-black shadowonly","transition-show":"jump-up","transition-hide":"jump-down"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.tip),1)])),_:1},8,["delay","offset"])}}});var n=o(8870),c=o(7518),r=o.n(c);const i=a;r()(a,"components",{QTooltip:n.Z})},747:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>pe});var l=o(3673),s=o(1959),a=o(2323),n=o(8880);const c=(0,l.HX)("data-v-3fb170d8");(0,l.dD)("data-v-3fb170d8");const r={class:"toc"},i=(0,l.Uk)(" 目录 "),m={key:0},d={key:1};(0,l.Cn)();const p=(0,l.aZ)({expose:[],props:{toc_tree:{type:[]}},setup(e){const t=e,o=(0,l.FN)(),p=(0,s.iH)(""),u=e=>{o.emit("anchorto",e)},g=()=>{const e=document.querySelectorAll("h2,h3"),t=[];e.forEach((e=>{t.push(e.offsetTop)}));const o=document.documentElement.scrollTop||document.body.scrollTop;let l=0;for(let s=0;s<t.length;s++)o+100>=t[s]&&(l=s);0!=l&&(p.value=e[l].id)};return(0,l.bv)((()=>{window.addEventListener("scroll",g)})),(0,l.Ah)((()=>{window.removeEventListener("scroll",g)})),(e,o)=>{const s=(0,l.up)("q-avatar"),g=(0,l.up)("q-chip");return(0,l.wg)(),(0,l.j4)("ol",r,[t.toc_tree.length?((0,l.wg)(),(0,l.j4)(g,{key:0,class:"text-black q-ml-none q-mb-sm"},{default:c((()=>[(0,l.Wm)(s,{class:"glossy",icon:"toc",color:"primary","text-color":"white"}),i])),_:1})):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(t.toc_tree,((e,t)=>((0,l.wg)(),(0,l.j4)("li",null,[0!=e.children?((0,l.wg)(),(0,l.j4)("ol",m,[(0,l.Wm)("a",{onClick:t=>u(e.id),class:p.value==e.id?"current_toc":""},(0,a.zw)(t+1)+". "+(0,a.zw)(decodeURIComponent(e.id)),11,["onClick"]),((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.children,((o,s)=>(0,l.wy)(((0,l.wg)(),(0,l.j4)("ol",null,[(0,l.Wm)("a",{onClick:e=>u(o.id),class:p.value==o.id?"current_toc":""},(0,a.zw)(t+1)+"."+(0,a.zw)(s+1)+" "+(0,a.zw)(decodeURIComponent(o.id)),11,["onClick"])],512)),[[n.F8,-1!=e.children.map((e=>e.id)).indexOf(p.value)||e.id==p.value]]))),256))])):((0,l.wg)(),(0,l.j4)("ol",d,[(0,l.Wm)("a",{onClick:t=>u(e.id),class:p.value==e.id?"current_toc":""},(0,a.zw)(t+1)+" "+(0,a.zw)(decodeURIComponent(e.id)),11,["onClick"])]))])))),256))])}}});var u=o(7030),g=o(5096),h=o(7518),w=o.n(h);p.__scopeId="data-v-3fb170d8";const v=p;w()(p,"components",{QChip:u.Z,QAvatar:g.Z});var f=o(1768),y=o(9273),q=o(8825),_=o(6395),k=o(4029);const b={class:"text-h6 text-bold q-pb-md"},x={class:"col-10"},W={class:"col-2 q-px-sm row"},S=(0,l.Wm)("div",null,[(0,l.Uk)(" 发布 "),(0,l.Wm)("br"),(0,l.Uk)("评论 ")],-1),U={key:1,class:"text-center text-positive"},Z={class:"q-gutter-xs q-mt-xl"},j={class:"q-mt-lg row"},Q=(0,l.Wm)("span",{class:"inline_ text-h6 text-bold"},"历史评论：",-1),C={class:"text-bold text-blue-grey-9"},z={class:"text-subtitle2 text-grey"},I={key:0,class:"text-grey-7"},T={key:1,class:"text-grey-7"},D=(0,l.aZ)({expose:[],props:{aid:{type:String||Number,default:0}},setup(e){const t=e,o=(0,y.useStore)(),c=(0,q.Z)(),r=(0,s.qj)({comments:[],reverse:!1,edit_comment:""}),i=()=>{(0,f.api)("/api/comment?article="+t.aid).then((e=>{r.comments=e.data.results}))};(0,l.YP)((()=>r.reverse),(()=>{r.comments=r.comments.reverse()})),(0,l.bv)((()=>{i()}));const m=()=>{let e={article:t.aid,content:r.edit_comment,user:o.getters.getUid};f.api.post("api/comment/",e).then((e=>{c.notify("评论发布成功！"),r.edit_comment="",i()})).catch((e=>{c.notify({message:"评论发布失败！",color:"red"})}))};return(e,t)=>{const o=(0,l.up)("q-input"),c=(0,l.up)("q-btn"),i=(0,l.up)("q-form"),d=(0,l.up)("q-space"),p=(0,l.up)("q-toggle"),u=(0,l.up)("q-img"),g=(0,l.up)("q-avatar"),h=(0,l.up)("q-card-section"),w=(0,l.up)("q-separator"),v=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)("div",null,[(0,l.Wm)("div",b,(0,a.zw)((0,s.SU)(r).comments.length)+" 评论 ",1),(0,s.SU)(_.Z).getItem("uid")?((0,l.wg)(),(0,l.j4)(i,{key:0,onSubmit:m,class:"row flex"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",x,[(0,l.Wm)(o,{modelValue:(0,s.SU)(r).edit_comment,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,s.SU)(r).edit_comment=e),autogrow:"",outlined:"",type:"textarea"},null,8,["modelValue"])]),(0,l.Wm)("div",W,[(0,l.Wm)(c,{unelevated:"","no-wrap":"",align:"evenly",color:"primary",class:"col-12 text-white shadowhover",type:"submit"},{default:(0,l.w5)((()=>[S])),_:1})])])),_:1})):((0,l.wg)(),(0,l.j4)("div",U,"点击顶栏头像按钮登录以发布评论")),(0,l.wy)((0,l.Wm)("div",Z,[(0,l.Wm)("div",j,[Q,(0,l.Wm)(d),(0,l.Wm)(p,{class:"text-body2 text-grey q-mr-md",color:"primary","keep-color":"",modelValue:(0,s.SU)(r).reverse,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,s.SU)(r).reverse=e),label:"倒序查看"},null,8,["modelValue"])]),((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)((0,s.SU)(r).comments,((e,t)=>((0,l.wg)(),(0,l.j4)(v,{square:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"row items-center q-pl-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{size:"lg",class:"on-left"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{src:e.user_avatar||"img/akari.jpg",ratio:"1","img-style":{width:"2em",height:"2em"}},null,8,["src"])])),_:2},1024),(0,l.Wm)("div",C,(0,a.zw)(e.user_nickname?e.user_nickname:"友人A"),1),(0,l.Wm)(d),(0,l.Wm)("div",z,[(0,l.Uk)((0,a.zw)((0,s.SU)(k.IK)(e.created))+"    ",1),(0,s.SU)(r).reverse?((0,l.wg)(),(0,l.j4)("span",I,(0,a.zw)((0,s.SU)(r).comments.length-t)+"楼",1)):((0,l.wg)(),(0,l.j4)("span",T,(0,a.zw)(t+1)+"楼",1))])])),_:2},1024),(0,l.Wm)(h,{id:"comment_card",class:"inline_ q-pl-xl q-py-none q-ml-xs"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.content),1)])),_:2},1024),(0,l.Wm)(w,{class:"line-1px q-mt-none q-mb-md",inset:""})])),_:2},1024)))),256))],512),[[n.F8,0!=(0,s.SU)(r).comments.length]])])}}});var E=o(8689),A=o(4689),H=o(2165),V=o(2025),Y=o(8886),P=o(151),B=o(5589),K=o(4027),N=o(5869);const F=D;w()(D,"components",{QForm:E.Z,QInput:A.Z,QBtn:H.Z,QSpace:V.Z,QToggle:Y.Z,QCard:P.Z,QCardSection:B.Z,QAvatar:g.Z,QImg:K.Z,QSeparator:N.Z});var R=o(7590),L=o(535),M=o.n(L);const X={class:"markdwon"},O=(0,l.aZ)({expose:[],props:{mkd:{default:""}},setup(e){const t=e,o=(0,l.FN)(),a={anchor:{level:2,slugify:e=>encodeURIComponent(String(e).trim()),permalink:!0,permalinkSpace:!0,permalinkBefore:!0,permalinkSymbol:"#",permalinkHref:(e,t)=>window.location.href+"#"+e},highlight:{auto:!1}};(0,l.bv)((()=>{setTimeout((()=>{c()}),500)}));const n=(e,t)=>{t.forEach((t=>{for(let o=e.length-1;o>-1;o--)if(t.top>e[o].top){e[o].children.push(t);break}}))},c=()=>{let e=[],t=[];document.getElementsByTagName("h2").forEach((t=>{e.push({id:t.getAttribute("id"),top:t.offsetTop,level:2,children:[]})})),setTimeout((()=>{document.getElementsByTagName("h3").forEach((e=>{t.push({id:e.getAttribute("id"),top:e.offsetTop,level:3})}))}),10),setTimeout((()=>{n(e,t)}),200),setTimeout((()=>{o.emit("toctree",e)}),200)};return(e,o)=>((0,l.wg)(),(0,l.j4)("div",X,[(0,l.Wm)((0,s.SU)(M()),{source:t.mkd,breaks:"",llinkify:"",html:"",anchor:a.anchor,highlight:a.highlight},null,8,["source","anchor","highlight"])]))}}),G=O;var J=o(9582);const $=(0,l.HX)("data-v-8bd9065a");(0,l.dD)("data-v-8bd9065a");const ee={class:"\n        col-lg-9 col-md-10 col-sm-12 col-xs-12\n        q-px-sm\n        ztop2\n        justify-center\n      ",style:{margin:"-50px 0 0 0"}},te={class:"row"},oe={class:" gt-xs col-3 q-pt-xl q-px-sm",style:{position:"relative"}},le={class:"\n            col-md-9 col-lg-9 col-xl-9 col-sm-9 col-12\n            bg-white\n            shadowonly\n            q-px-lg q-pt-sm q-pb-xl\n          "},se={class:"flex"},ae=(0,l.Wm)("div",{class:"q-mb-md q-mt-xl text-center text-blue-grey-5"}," — 全文结束，感谢阅读 — ",-1);(0,l.Cn)();const ne=(0,l.aZ)({expose:[],setup(e){const t=(0,J.yj)(),o=(0,J.tv)(),n=(0,s.qj)({is_show_toc_sider:!1,toctree:[],article:{},mkd:"Markdown file is Loading..."}),c=((0,s.iH)(),e=>{f.api.get("api/article/"+e).then((e=>{n.article=e.data})).then((()=>{f.api.get(n.article.markdown).then((e=>{n.mkd=e.data}))}))});(0,l.bv)((()=>{c(t.params.id)}));const r=e=>{n.toctree=e},i=e=>{o.push({path:"/articles",query:{tag:e}})},m=e=>{document.getElementById(e).scrollIntoView({behavior:"smooth"})},d=e=>{setTimeout((()=>{m(e)}),10)};return(e,o)=>{const c=(0,l.up)("q-img"),p=(0,l.up)("q-icon"),u=(0,l.up)("q-btn"),g=(0,l.up)("q-space"),h=(0,l.up)("q-chip"),w=(0,l.up)("q-separator"),f=(0,l.up)("q-drawer"),y=(0,l.up)("q-page-sticky"),q=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(q,{class:"row justify-center"},{default:$((()=>[(0,l.Wm)(c,{src:(0,s.SU)(n).article.img,style:{height:"54vh",width:"100vd"}},null,8,["src"]),(0,l.Wm)("div",ee,[(0,l.Wm)("div",te,[(0,l.Wm)("div",oe,[(0,l.Wm)(v,{toc_tree:(0,s.SU)(n).toctree,onAnchorto:m,class:"q-pt-lg tocarea toc-sticky"},null,8,["toc_tree"])]),(0,l.Wm)("div",le,[(0,l.Wm)("div",se,[(0,l.Wm)(p,{size:"xs",color:"purple",name:"sell",class:"q-mt-sm q-mr-md"},{default:$((()=>[(0,l.Wm)(R.Z,{tip:"标签"})])),_:1}),((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)((0,s.SU)(n).article.tags,(e=>((0,l.wg)(),(0,l.j4)(u,{class:"q-py-none",flat:"","no-caps":"",dense:"",type:"a",onClick:t=>i(e),label:e},null,8,["onClick","label"])))),256)),(0,l.Wm)(g),(0,l.Wm)(h,{square:"",outline:"",class:"relative-top-right q-pr-none q-mr-none card_action"},{default:$((()=>[(0,l.Wm)(p,{class:"q-pr-sm",size:"xs",color:"orange",name:"update"}),(0,l.Uk)(" "+(0,a.zw)((0,s.SU)(k.dE)((0,s.SU)(n).article.update))+" ",1),(0,l.Wm)(R.Z,{tip:"最后更新时间"})])),_:1})]),(0,l.Wm)(w,{class:"q-my-sm bg-blue-grey-3"}),(0,l.Wm)(G,{mkd:(0,s.SU)(n).mkd,onToctree:r},null,8,["mkd"]),ae,(0,l.Wm)(F,{class:"q-pt-lg",aid:(0,s.SU)(t).params.id.toString()},null,8,["aid"])])])]),(0,l.Wm)(f,{modelValue:(0,s.SU)(n).is_show_toc_sider,"onUpdate:modelValue":o[1]||(o[1]=e=>(0,s.SU)(n).is_show_toc_sider=e),width:"50vw",side:"right",overlay:"",class:"tocsider shadowonly",onClick:o[2]||(o[2]=e=>(0,s.SU)(n).is_show_toc_sider=!1)},{default:$((()=>[(0,l.Wm)(v,{toc_tree:(0,s.SU)(n).toctree,onAnchorto:d,class:"q-mx-md"},null,8,["toc_tree"])])),_:1},8,["modelValue"]),(0,l.Wm)(y,{class:"lt-sm",position:"bottom-right",style:{"z-index":"10"},offset:[28,80]},{default:$((()=>[(0,l.Wm)(u,{round:"",color:"purple",icon:"toc",class:"shadow-1",onClick:o[3]||(o[3]=e=>(0,s.SU)(n).is_show_toc_sider=!(0,s.SU)(n).is_show_toc_sider)})])),_:1})])),_:1})}}});var ce=o(4379),re=o(7704),ie=o(4554),me=o(2901),de=o(1007);ne.__scopeId="data-v-8bd9065a";const pe=ne;w()(ne,"components",{QPage:ce.Z,QImg:K.Z,QScrollArea:re.Z,QIcon:ie.Z,QBtn:H.Z,QSpace:V.Z,QChip:u.Z,QSeparator:N.Z,QDrawer:me.Z,QPageSticky:de.Z})}}]);