(self["webpackChunkweb_vue3"]=self["webpackChunkweb_vue3"]||[]).push([[584],{4029:(e,t,l)=>{"use strict";l.d(t,{dE:()=>o,IK:()=>i});var a=l(1082);let o=e=>a.ZP.formatDate(new Date(e),"YYYY/MM/DD - HH:mm:ss");function s(e){let t=new Date,l=a.ZP.getDateDiff(t,e,"minutes");return 0==l?"刚刚":l<60?l+"分钟前":l<1440?a.ZP.getDateDiff(t,e,"hours")+"小时前":a.ZP.getDateDiff(t,e,"days")+"天前"}let i=e=>s(e)},7590:(e,t,l)=>{"use strict";l.d(t,{Z:()=>n});var a=l(3673),o=l(2323);const s=(0,a.aZ)({expose:[],props:{tip:{type:String},delay:{type:Number,default:100},offset:{type:Array,default:()=>[0,8]}},setup(e){return(t,l)=>{const s=(0,a.up)("q-tooltip");return(0,a.wg)(),(0,a.j4)(s,{id:"chiptip",delay:e.delay,offset:e.offset,class:"bg-grey-12 text-black shadowonly","transition-show":"jump-up","transition-hide":"jump-down"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.tip),1)])),_:1},8,["delay","offset"])}}});var i=l(8870),r=l(7518),d=l.n(r);const n=s;d()(s,"components",{QTooltip:i.Z})},8584:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>re});var a=l(3673),o=l(1959),s=l(2323),i=l(7590),r=l(9582),d=l(8825),n=l(6395),c=l(1768),m=l(4029);const p=(0,a.HX)("data-v-b3055cf6");(0,a.dD)("data-v-b3055cf6");const u={class:"row"},f={class:"text-h5 text-bold q-mb-sm"},g={class:""},b={class:"q-pr-md q-pt-xs col-3"},w=(0,a.Wm)("div",{class:"text-h5 text-bold q-mb-xl q-pt-sm col-12"},"文章增改",-1),_={key:0,class:"col-12 row q-ma-none q-pb-md"},y={class:""},q={class:"col-12 q-pb-md"},W={class:"col-12"},k={class:"col-12 q-pt-md"},h={class:"q-ml-sm"};(0,a.Cn)();const v=(0,a.aZ)({expose:[],setup(e){const t=(0,r.tv)(),l=(0,d.Z)(),v=(0,o.qj)({str_tags:"",markdown:null,img:null,count:0,articles:[{}],prepage:"",nextpage:"",put_id:0,del_article:{},del_confirm:!1,user:0}),U=[{name:"id",required:!0,label:"ID",align:"left",field:e=>e.id,format:e=>`${e}`,sortable:!0,style:"width: 15px"},{name:"title",required:!0,label:"标题",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0,style:"width: 200px"},{name:"img",required:!0,label:"标题图",align:"center",field:e=>e.img,format:e=>`${e}`,sortable:!0},{name:"tags",required:!1,label:"标签",align:"left",field:e=>e.tags,format:e=>`${e}`,sortable:!0,style:"width: 200px"},{name:"update",required:!0,label:"更新时间",align:"left",field:e=>e.update,format:e=>`${e}`,sortable:!0},{name:"option",label:"操作栏",align:"left"}],Z={descending:!1,page:1,rowsPerPage:12};(0,a.bv)((()=>{S()}));const S=e=>{e?c.api.get(e).then((e=>{v.articles=e.data.results,v.count=e.data.count,v.prepage=e.data.previous,v.nextpage=e.data.next})):c.api.get("/api/article").then((e=>{v.articles=e.data.results,v.count=e.data.count,v.prepage=e.data.previous,v.nextpage=e.data.next}))},x=e=>{const t={author:n.Z.getItem("uid")};""!==v.str_tags&&(-1==v.str_tags.indexOf("、")?t.tag=v.str_tags:t.tag=v.str_tags.split("、")),null!==v.img&&(t.img=v.img),null!==v.markdown&&(t.markdown=v.markdown),0==v.put_id?c.api.post("api/article/",t).then((e=>{l.notify("文章 - 成功发布"),D(),setTimeout((()=>{S()}),100)})).catch((e=>{l.notify({message:"发布失败！ "+e,color:"red"})})):(console.log("PUT data"+t),c.api.put("api/article/"+v.put_id,t).then((e=>{l.notify("文章已成功修改"),v.put_id=0,D(),setTimeout((()=>{S()}),100)})).catch((e=>{l.notify({message:"修改失败！ "+e,color:"red"})})))},Q=(0,o.iH)(),C=(0,o.iH)(),D=e=>{v.str_tags="",v.img=null,v.markdown=null,Q.value.reset(),C.value.reset()},T=e=>{c.api.delete("api/article/"+e).then((e=>{console.log(e.data),l.notify("文章已删除！")})).catch((e=>{l.notify({message:"删除失败！ "+e,color:"red"})})),setTimeout((()=>{S()}),100)},j=e=>{v.del_confirm=!0,v.del_article=e},P=e=>{t.push({name:"article",params:{id:e}})};return(e,t)=>{const l=(0,a.up)("q-space"),r=(0,a.up)("q-btn"),d=(0,a.up)("q-badge"),n=(0,a.up)("q-td"),c=(0,a.up)("q-img"),V=(0,a.up)("q-tr"),z=(0,a.up)("q-table"),I=(0,a.up)("q-separator"),A=(0,a.up)("q-uploader"),H=(0,a.up)("q-input"),R=(0,a.up)("q-form"),$=(0,a.up)("q-card-section"),M=(0,a.up)("q-card-actions"),Y=(0,a.up)("q-card"),B=(0,a.up)("q-dialog"),X=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)("div",u,[(0,a.Wm)("div",null,[(0,a.Wm)(z,{flat:"",rows:(0,o.SU)(v).articles,columns:U,"row-key":"id",pagination:Z},{top:p((()=>[(0,a.Wm)("div",f," 文章列表 （共"+(0,s.zw)((0,o.SU)(v).count)+"篇） ",1),(0,a.Wm)(l),(0,a.Wm)("div",g,[(0,a.Wm)(r,{flat:"",dense:"",disable:null==(0,o.SU)(v).prepage,color:"primary",icon:"arrow_back_ios",onClick:t[1]||(t[1]=e=>S((0,o.SU)(v).prepage))},{default:p((()=>[(0,a.Wm)(i.Z,{tip:"上一页"})])),_:1},8,["disable"]),(0,a.Wm)(r,{flat:"",dense:"",disable:null==(0,o.SU)(v).nextpage,color:"primary",icon:"arrow_forward_ios",onClick:t[2]||(t[2]=e=>S((0,o.SU)(v).nextpage))},{default:p((()=>[(0,a.Wm)(i.Z,{tip:"下一页"})])),_:1},8,["disable"])])])),body:p((e=>[(0,a.Wm)(V,{props:e},{default:p((()=>[(0,a.Wm)(n,{key:"id",props:e,onClick:t=>P(e.row.id)},{default:p((()=>[(0,a.Wm)(d,{color:"primary"},{default:p((()=>[(0,a.Uk)((0,s.zw)(e.row.id),1)])),_:2},1024)])),_:2},1032,["props","onClick"]),(0,a.Wm)(n,{key:"title",props:e,onClick:t=>P(e.row.id)},{default:p((()=>[(0,a.Uk)((0,s.zw)(e.row.title),1)])),_:2},1032,["props","onClick"]),(0,a.Wm)(n,{key:"img",props:e,onClick:t=>P(e.row.id)},{default:p((()=>[e.row.img?((0,a.wg)(),(0,a.j4)(c,{key:0,src:e.row.img},null,8,["src"])):(0,a.kq)("",!0)])),_:2},1032,["props","onClick"]),(0,a.Wm)(n,{key:"tags",props:e,onClick:t=>P(e.row.id)},{default:p((()=>[(0,a.Uk)((0,s.zw)(e.row.tags?e.row.tags.toString():null),1)])),_:2},1032,["props","onClick"]),(0,a.Wm)(n,{key:"update",props:e,onClick:t=>P(e.row.id)},{default:p((()=>[(0,a.Uk)((0,s.zw)((0,o.SU)(m.dE)(e.row.update)),1)])),_:2},1032,["props","onClick"]),(0,a.Wm)(n,{key:"option"},{default:p((()=>[(0,a.Wm)(r,{round:"",flat:"",dense:"",color:"green",icon:"create",onClick:t=>(0,o.SU)(v).put_id=e.row.id},null,8,["onClick"]),(0,a.Wm)(r,{round:"",dense:"",flat:"",color:"red",icon:"delete_forever",onClick:t=>j(e.row)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),bottom:p((()=>[])),_:1},8,["rows"])]),(0,a.Wm)(I,{vertical:"",inset:"",color:"primary",class:"q-mx-xl",style:{width:"2px"}}),(0,a.Wm)("div",b,[(0,a.Wm)(R,{onReset:D,onSubmit:x,class:"row clear"},{default:p((()=>[w,0!==(0,o.SU)(v).put_id?((0,a.wg)(),(0,a.j4)("div",_,[(0,a.Wm)(r,{flat:"","no-caps":"",dense:"",color:"red",class:"text-bold q-mr-md q-pl-none",label:"[Click to Remove]  PUT_ID:",onClick:t[3]||(t[3]=e=>(0,o.SU)(v).put_id=0)},{default:p((()=>[(0,a.Wm)(d,{class:"q-ml-sm","text-color":"white",color:"primary",label:(0,o.SU)(v).put_id},null,8,["label"])])),_:1})])):(0,a.kq)("",!0),(0,a.Wm)("div",y,[(0,a.Wm)("div",q,[(0,a.Wm)(A,{label:"Image",ref:C,class:"shadowhover",accept:"image/*",onAdded:t[4]||(t[4]=e=>(0,o.SU)(v).img=e[0]),onRemoved:t[5]||(t[5]=()=>(0,o.SU)(v).img=null)},null,512)]),(0,a.Wm)("div",W,[(0,a.Wm)(A,{label:"Markdown",ref:Q,class:"shadowhover",accept:".md",onAdded:t[6]||(t[6]=e=>(0,o.SU)(v).markdown=e[0]),onRemoved:t[7]||(t[7]=()=>(0,o.SU)(v).markdown=null)},null,512)]),(0,a.Wm)(H,{class:"q-pt-sm",modelValue:(0,o.SU)(v).str_tags,"onUpdate:modelValue":t[8]||(t[8]=e=>(0,o.SU)(v).str_tags=e),style:{"min-width":"320px"},label:"Tags",clearable:"",debounce:"500","clear-icon":"close"},null,8,["modelValue"])]),(0,a.Wm)("div",k,[(0,a.Wm)(r,{label:"Submit",type:"submit",color:"primary",flat:"",class:"shadowhover"}),(0,a.Wm)(r,{label:"Reset",type:"reset",color:"grey-13",flat:"",class:"q-ml-sm"})])])),_:1})]),(0,a.Wm)(B,{modelValue:(0,o.SU)(v).del_confirm,"onUpdate:modelValue":t[10]||(t[10]=e=>(0,o.SU)(v).del_confirm=e)},{default:p((()=>[(0,a.Wm)(Y,null,{default:p((()=>[(0,a.Wm)($,{class:"row items-center"},{default:p((()=>[(0,a.Wm)("span",h,"确认删除【 "+(0,s.zw)((0,o.SU)(v).del_article.title)+"】？",1)])),_:1}),(0,a.Wm)(M,{align:"right"},{default:p((()=>[(0,a.wy)((0,a.Wm)(r,{flat:"",label:"取消",color:"grey"},null,512),[[X]]),(0,a.wy)((0,a.Wm)(r,{flat:"",label:"删除",color:"primary",onClick:t[9]||(t[9]=e=>T((0,o.SU)(v).del_article.id))},null,512),[[X]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}});var U=l(5667),Z=l(2025),S=l(2165),x=l(8186),Q=l(3884),C=l(9721),D=l(4027),T=l(5869),j=l(8689),P=l(1034),V=l(4689),z=l(6778),I=l(151),A=l(5589),H=l(9367),R=l(677),$=l(7518),M=l.n($);v.__scopeId="data-v-b3055cf6";const Y=v;M()(v,"components",{QTable:U.Z,QSpace:Z.Z,QBtn:S.Z,QTr:x.Z,QTd:Q.Z,QBadge:C.Z,QImg:D.Z,QSeparator:T.Z,QForm:j.Z,QUploader:P.Z,QInput:V.Z,QDialog:z.Z,QCard:I.Z,QCardSection:A.Z,QCardActions:H.Z}),M()(v,"directives",{ClosePopup:R.Z});const B=(0,a.HX)("data-v-b21be81c");(0,a.dD)("data-v-b21be81c");const X={class:"row"},E={class:"text-h5 text-bold q-mb-sm"},F=(0,a.Wm)("div",{class:"text-h5 text-bold q-mb-xl q-pt-sm"},"音乐新增",-1),K={class:"q-mt-lg"},N={class:"q-ml-sm"};(0,a.Cn)();const O=(0,a.aZ)({expose:[],setup(e){const t=(0,d.Z)(),l=(0,o.qj)({musics:null,music_list:[{}],count:0,del_confirm:!1,del_music:{}}),i=[{name:"id",required:!0,label:"ID",align:"left",field:e=>e.id,format:e=>`${e}`,sortable:!0},{name:"title",required:!0,label:"歌名",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0},{name:"artist",required:!0,label:"歌手",align:"left",field:e=>e.title,format:e=>`${e}`,sortable:!0},{name:"option",label:"操作栏",align:"left"}],r={descending:!1,page:1,rowsPerPage:999},n=()=>{c.api.get("/api/music").then((e=>{l.music_list=e.data.results,l.count=e.data.count}))};(0,a.bv)((()=>{n()}));const m=e=>{c.api.delete("api/music/"+e).then((e=>{console.log(e.data),t.notify("音乐 - 成功删除"),g(),setTimeout((()=>{n()}),100)})).catch((e=>{t.notify({message:"删除失败！ "+e,color:"red"})}))},p=e=>{l.del_confirm=!0,l.del_music=e},u=e=>{for(let a in l.musics){const e={music:l.musics[a]};c.api.post("api/music/",e).then((e=>{console.log(e.data),t.notify("音乐 - 成功添加"),g(),setTimeout((()=>{n()}),100)})).catch((e=>{t.notify({message:"添加失败！ "+e,color:"red"})}))}},f=(0,o.iH)(),g=()=>{l.musics=null,f.value.reset()};return(e,d)=>{const n=(0,a.up)("q-space"),c=(0,a.up)("q-badge"),b=(0,a.up)("q-td"),w=(0,a.up)("q-btn"),_=(0,a.up)("q-tr"),y=(0,a.up)("q-table"),q=(0,a.up)("q-separator"),W=(0,a.up)("q-uploader"),k=(0,a.up)("q-form"),h=(0,a.up)("q-card-section"),v=(0,a.up)("q-card-actions"),U=(0,a.up)("q-card"),Z=(0,a.up)("q-dialog"),S=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)("div",X,[(0,a.Wm)(y,{flat:"",rows:(0,o.SU)(l).music_list,columns:i,"row-key":"id",dense:(0,o.SU)(t).screen.lt.md,pagination:r,"table-style":"background:none;box-shadow:none"},{top:B((()=>[(0,a.Wm)("div",E," 音乐列表 （共"+(0,s.zw)((0,o.SU)(l).count)+"首） ",1),(0,a.Wm)(n)])),body:B((e=>[(0,a.Wm)(_,{props:e},{default:B((()=>[(0,a.Wm)(b,{key:"id",props:e},{default:B((()=>[(0,a.Wm)(c,{color:"primary"},{default:B((()=>[(0,a.Uk)((0,s.zw)(e.row.id),1)])),_:2},1024)])),_:2},1032,["props"]),(0,a.Wm)(b,{key:"title",props:e},{default:B((()=>[(0,a.Uk)((0,s.zw)(e.row.title),1)])),_:2},1032,["props"]),(0,a.Wm)(b,{key:"artist",props:e},{default:B((()=>[(0,a.Uk)((0,s.zw)(e.row.artist),1)])),_:2},1032,["props"]),(0,a.Wm)(b,{key:"option"},{default:B((()=>[(0,a.Wm)(w,{round:"",dense:"",flat:"",color:"red",icon:"delete_forever",onClick:t=>p(e.row)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),bottom:B((()=>[])),_:1},8,["rows","dense"]),(0,a.Wm)(q,{vertical:"",inset:"",color:"primary",class:"q-mx-xl",style:{width:"2px"}}),(0,a.Wm)(k,{onSubmit:u,onReset:g,class:"q-gutter-md",style:{"min-height":"500px"}},{default:B((()=>[F,(0,a.Wm)(W,{label:"Music",multiple:"",class:"shadowhover",ref:f,accept:"audio/*",onAdded:d[1]||(d[1]=e=>(0,o.SU)(l).musics=e),onRemoved:d[2]||(d[2]=e=>(0,o.SU)(l).musics=(0,o.SU)(l).musics.filter((t=>!e.includes(t))))},null,512),(0,a.Wm)("div",K,[(0,a.Wm)(w,{label:"Submit",flat:"",type:"submit",color:"primary",class:"shadowhover"}),(0,a.Wm)(w,{label:"Reset",flat:"",type:"reset",color:"grey-13",class:"q-ml-sm"})])])),_:1}),(0,a.Wm)(Z,{modelValue:(0,o.SU)(l).del_confirm,"onUpdate:modelValue":d[4]||(d[4]=e=>(0,o.SU)(l).del_confirm=e)},{default:B((()=>[(0,a.Wm)(U,null,{default:B((()=>[(0,a.Wm)(h,{class:"row items-center"},{default:B((()=>[(0,a.Wm)("span",N,"确认删除【 "+(0,s.zw)((0,o.SU)(l).del_music.title)+" - "+(0,s.zw)((0,o.SU)(l).del_music.artist)+"】？",1)])),_:1}),(0,a.Wm)(v,{align:"right"},{default:B((()=>[(0,a.wy)((0,a.Wm)(w,{flat:"",label:"取消",color:"grey"},null,512),[[S]]),(0,a.wy)((0,a.Wm)(w,{flat:"",label:"删除",color:"primary",onClick:d[3]||(d[3]=e=>m((0,o.SU)(l).del_music.id))},null,512),[[S]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}});O.__scopeId="data-v-b21be81c";const G=O;M()(O,"components",{QTable:U.Z,QSpace:Z.Z,QTr:x.Z,QTd:Q.Z,QBadge:C.Z,QBtn:S.Z,QSeparator:T.Z,QForm:j.Z,QUploader:P.Z,QDialog:z.Z,QCard:I.Z,QCardSection:A.Z,QCardActions:H.Z}),M()(O,"directives",{ClosePopup:R.Z});const J=(0,a.HX)("data-v-206d634f");(0,a.dD)("data-v-206d634f");const L={class:"col-12 justify-left admin_planels"},ee={class:"col-12 justify-left q-pl-lg",style:{height:"50px"}};(0,a.Cn)();const te=(0,a.aZ)({expose:[],setup(e){const t=(0,o.qj)({tab:"Article",tabs:["Article","Music"]});return(e,l)=>{const s=(0,a.up)("q-img"),i=(0,a.up)("q-tab"),r=(0,a.up)("q-tabs"),d=(0,a.up)("q-tab-panel"),n=(0,a.up)("q-tab-panels"),c=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(c,{class:"row"},{default:J((()=>[(0,a.Wm)(s,{src:"https://evens-oss.oss-cn-shanghai.aliyuncs.com/img/about.jpg",style:{height:"50px",width:"100vd",opacity:"0.85"}}),(0,a.Wm)("div",L,[(0,a.Wm)("div",ee,[(0,a.Wm)(r,{align:"left",class:"text-teal",modelValue:(0,o.SU)(t).tab,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,o.SU)(t).tab=e)},{default:J((()=>[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)((0,o.SU)(t).tabs,((e,t)=>((0,a.wg)(),(0,a.j4)(i,{"no-caps":"",class:"text-bold",name:e,label:e},null,8,["name","label"])))),256))])),_:1},8,["modelValue"])]),(0,a.Wm)(n,{class:"shadowonly q-px-sm",modelValue:(0,o.SU)(t).tab,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,o.SU)(t).tab=e),style:{background:"none","box-shadow":"none"},flat:""},{default:J((()=>[(0,a.Wm)(d,{name:"Article"},{default:J((()=>[(0,a.Wm)(Y)])),_:1}),(0,a.Wm)(d,{name:"Music"},{default:J((()=>[(0,a.Wm)(G)])),_:1})])),_:1},8,["modelValue"])])])),_:1})}}});var le=l(4379),ae=l(7547),oe=l(3269),se=l(5906),ie=l(6602);te.__scopeId="data-v-206d634f";const re=te;M()(te,"components",{QPage:le.Z,QImg:D.Z,QTabs:ae.Z,QTab:oe.Z,QTabPanels:se.Z,QTabPanel:ie.Z})}}]);