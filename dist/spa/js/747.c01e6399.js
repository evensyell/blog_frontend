(self["webpackChunkweb_vue3"]=self["webpackChunkweb_vue3"]||[]).push([[747],{4029:(e,t,o)=>{"use strict";o.d(t,{dE:()=>s,IK:()=>n});var l=o(1082);let s=e=>l.ZP.formatDate(new Date(e),"YYYY/MM/DD - HH:mm:ss");function a(e){let t=new Date,o=l.ZP.getDateDiff(t,e,"minutes");return 0==o?"刚刚":o<60?o+"分钟前":o<1440?l.ZP.getDateDiff(t,e,"hours")+"小时前":l.ZP.getDateDiff(t,e,"days")+"天前"}let n=e=>a(e)},7590:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});var l=o(3673),s=o(2323);const a=(0,l.aZ)({expose:[],props:{tip:{type:String},delay:{type:Number,default:100},offset:{type:Array,default:()=>[0,8]}},setup(e){return(t,o)=>{const a=(0,l.up)("q-tooltip");return(0,l.wg)(),(0,l.j4)(a,{id:"chiptip",delay:e.delay,offset:e.offset,class:"bg-grey-12 text-black shadowonly","transition-show":"jump-up","transition-hide":"jump-down"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.tip),1)])),_:1},8,["delay","offset"])}}});var n=o(8870),c=o(7518),r=o.n(c);const i=a;r()(a,"components",{QTooltip:n.Z})},747:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>me});var l=o(3673),s=o(1959),a=o(2323);const n=(0,l.HX)("data-v-3635c9f3");(0,l.dD)("data-v-3635c9f3");const c={class:"toc"},r=(0,l.Uk)(" 目录 "),i={key:0},m={key:1};(0,l.Cn)();const d=(0,l.aZ)({expose:[],props:{toc_tree:{type:[]}},setup(e){const t=e,o=(0,l.FN)(),d=(0,s.iH)(""),p=e=>{o.emit("anchorto",e)},u=()=>{const e=document.querySelectorAll("h2,h3"),t=[];e.forEach((e=>{t.push(e.offsetTop)}));const o=document.documentElement.scrollTop||document.body.scrollTop;let l=0;for(let s=0;s<t.length;s++)o+50>=t[s]&&(l=s);0!=l&&(d.value=e[l].id)};return(0,l.bv)((()=>{window.addEventListener("scroll",u)})),(0,l.Ah)((()=>{window.removeEventListener("scroll",u)})),(e,o)=>{const s=(0,l.up)("q-avatar"),u=(0,l.up)("q-chip");return(0,l.wg)(),(0,l.j4)("ol",c,[t.toc_tree.length?((0,l.wg)(),(0,l.j4)(u,{key:0,class:"text-black q-ml-none q-mb-sm"},{default:n((()=>[(0,l.Wm)(s,{class:"glossy",icon:"toc",color:"primary","text-color":"white"}),r])),_:1})):(0,l.ry)("",!0),((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(t.toc_tree,((e,t)=>((0,l.wg)(),(0,l.j4)("li",null,[0!=e.children?((0,l.wg)(),(0,l.j4)("ol",i,[(0,l.Wm)("a",{onClick:t=>p(e.id),class:d.value==e.id?"current_toc":""},(0,a.zw)(t+1)+". "+(0,a.zw)(decodeURIComponent(e.id)),11,["onClick"]),((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.children,((e,o)=>((0,l.wg)(),(0,l.j4)("ol",null,[(0,l.Wm)("a",{onClick:t=>p(e.id),class:d.value==e.id?"current_toc":""},(0,a.zw)(t+1)+"."+(0,a.zw)(o+1)+" "+(0,a.zw)(decodeURIComponent(e.id)),11,["onClick"])])))),256))])):((0,l.wg)(),(0,l.j4)("ol",m,[(0,l.Wm)("a",{onClick:t=>p(e.id),class:d.value==e.id?"current_toc":""},(0,a.zw)(t+1)+" "+(0,a.zw)(decodeURIComponent(e.id)),11,["onClick"])]))])))),256))])}}});var p=o(7030),u=o(5096),g=o(7518),h=o.n(g);d.__scopeId="data-v-3635c9f3";const w=d;h()(d,"components",{QChip:p.Z,QAvatar:u.Z});var f=o(1768),v=o(9273),y=o(8825),q=o(4029);const _={class:"text-h6 text-bold q-pb-md"},k={class:"col-10"},x={class:"col-2 q-px-sm row"},W=(0,l.Wm)("div",null,[(0,l.Uk)(" 发布 "),(0,l.Wm)("br"),(0,l.Uk)("评论 ")],-1),b={key:0,class:"text-bold text-h5 q-mt-md"},S={key:1,class:"q-gutter-xs q-mt-xl"},U={class:"q-mt-lg row"},Z=(0,l.Wm)("span",{class:"inline_ text-h6 text-bold"},"历史评论：",-1),j={class:"text-bold text-blue-grey-9"},Q={class:"text-subtitle2 text-grey"},C={key:0,class:"text-grey-7"},z={key:1,class:"text-grey-7"},T=(0,l.aZ)({expose:[],props:{aid:{type:String||Number,default:0}},setup(e){const t=e,o=(0,v.useStore)(),n=(0,y.Z)(),c=(0,s.qj)({comments:[],reverse:!1,edit_comment:""}),r=()=>{(0,f.api)("/api/comment?article="+t.aid).then((e=>{c.comments=e.data.results}))};(0,l.YP)((()=>c.reverse),(()=>{c.comments=c.comments.reverse()})),(0,l.bv)((()=>{r()}));const i=()=>{let e={article:t.aid,content:c.edit_comment,user:o.getters.getUid};f.api.post("api/comment/",e).then((e=>{n.notify("评论发布成功！"),c.edit_comment="",r()})).catch((e=>{n.notify({message:"评论发布失败！",color:"red"})}))};return(t,o)=>{const n=(0,l.up)("q-input"),r=(0,l.up)("q-btn"),m=(0,l.up)("q-form"),d=(0,l.up)("q-space"),p=(0,l.up)("q-toggle"),u=(0,l.up)("q-img"),g=(0,l.up)("q-avatar"),h=(0,l.up)("q-card-section"),w=(0,l.up)("q-separator"),f=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)("div",null,[(0,l.Wm)("div",_,(0,a.zw)((0,s.SU)(c).comments.length)+" 评论 ",1),(0,l.Wm)(m,{onSubmit:i,class:"row flex"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",k,[(0,l.Wm)(n,{modelValue:(0,s.SU)(c).edit_comment,"onUpdate:modelValue":o[1]||(o[1]=e=>(0,s.SU)(c).edit_comment=e),autogrow:"",outlined:"",type:"textarea"},null,8,["modelValue"])]),(0,l.Wm)("div",x,[(0,l.Wm)(r,{unelevated:"","no-wrap":"",align:"evenly",color:"primary",class:"col-12 text-white shadowhover",type:"submit"},{default:(0,l.w5)((()=>[W])),_:1})])])),_:1}),0==e.aid?((0,l.wg)(),(0,l.j4)("div",b,"暂无评论")):((0,l.wg)(),(0,l.j4)("div",S,[(0,l.Wm)("div",U,[Z,(0,l.Wm)(d),(0,l.Wm)(p,{class:"text-body2 text-grey q-mr-md",color:"primary","keep-color":"",modelValue:(0,s.SU)(c).reverse,"onUpdate:modelValue":o[2]||(o[2]=e=>(0,s.SU)(c).reverse=e),label:"倒序查看"},null,8,["modelValue"])]),((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)((0,s.SU)(c).comments,((e,t)=>((0,l.wg)(),(0,l.j4)(f,{square:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"row items-center q-pl-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{size:"lg",class:"on-left"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{src:e.user_avatar||"img/akari.jpg",ratio:"1","img-style":{width:"2em",height:"2em"}},null,8,["src"])])),_:2},1024),(0,l.Wm)("div",j,(0,a.zw)(e.user_nickname?e.user_nickname:"友人A"),1),(0,l.Wm)(d),(0,l.Wm)("div",Q,[(0,l.Uk)((0,a.zw)((0,s.SU)(q.IK)(e.created))+"    ",1),(0,s.SU)(c).reverse?((0,l.wg)(),(0,l.j4)("span",C,(0,a.zw)((0,s.SU)(c).comments.length-t)+"楼",1)):((0,l.wg)(),(0,l.j4)("span",z,(0,a.zw)(t+1)+"楼",1))])])),_:2},1024),(0,l.Wm)(h,{id:"comment_card",class:"inline_ q-pl-xl q-py-none q-ml-xs"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.content),1)])),_:2},1024),(0,l.Wm)(w,{class:"line-1px q-mt-none q-mb-md",inset:""})])),_:2},1024)))),256))]))])}}});var D=o(8689),I=o(4689),E=o(2165),A=o(2025),H=o(8886),V=o(151),Y=o(5589),P=o(4027),B=o(5869);const K=T;h()(T,"components",{QForm:D.Z,QInput:I.Z,QBtn:E.Z,QSpace:A.Z,QToggle:H.Z,QCard:V.Z,QCardSection:Y.Z,QAvatar:u.Z,QImg:P.Z,QSeparator:B.Z});var N=o(7590),R=o(535),F=o.n(R);const L={class:"markdwon"},M=(0,l.aZ)({expose:[],props:{mkd:{default:""}},setup(e){const t=e,a=(0,l.FN)(),n={anchor:{level:2,slugify:e=>encodeURIComponent(String(e).trim()),permalink:!0,permalinkSpace:!0,permalinkBefore:!0,permalinkSymbol:"#",permalinkHref:(e,t)=>window.location.href+"#"+e},highlight:{hljs:o(6019)}};(0,l.bv)((()=>{setTimeout((()=>{r()}),500)}));const c=(e,t)=>{t.forEach((t=>{for(let o=e.length-1;o>-1;o--)if(t.top>e[o].top){e[o].children.push(t);break}}))},r=()=>{let e=[],t=[];document.getElementsByTagName("h2").forEach((t=>{e.push({id:t.getAttribute("id"),top:t.offsetTop,level:2,children:[]})})),setTimeout((()=>{document.getElementsByTagName("h3").forEach((e=>{t.push({id:e.getAttribute("id"),top:e.offsetTop,level:3})}))}),10),setTimeout((()=>{c(e,t)}),200),setTimeout((()=>{a.emit("toctree",e)}),200)};return(e,o)=>((0,l.wg)(),(0,l.j4)("div",L,[(0,l.Wm)((0,s.SU)(F()),{source:t.mkd,breaks:"",llinkify:"",html:"",anchor:n.anchor,highlight:n.highlight},null,8,["source","anchor","highlight"])]))}}),X=M;var G=o(9582);const J=(0,l.HX)("data-v-f8437a6e");(0,l.dD)("data-v-f8437a6e");const O={class:"\n        col-lg-9 col-md-10 col-sm-12 col-xs-12\n        q-px-sm\n        ztop2\n        justify-center\n      ",style:{margin:"-50px 0 0 0"}},$={class:"row"},ee={class:"col-3 q-pt-xl q-pr-md ",style:{position:"relative"}},te={class:"\n            col-md-9 col-lg-9 col-xl-9 col-sm-9 col-12\n            bg-white\n            shadowonly\n            q-px-lg q-pt-sm q-pb-xl\n          "},oe={class:"flex"},le=(0,l.Wm)("div",{class:"q-mb-md q-mt-xl text-center text-blue-grey-5"}," — 全文结束，感谢阅读 — ",-1);(0,l.Cn)();const se=(0,l.aZ)({expose:[],setup(e){const t=(0,G.yj)(),o=(0,G.tv)(),n=(0,s.qj)({is_show_toc_sider:!1,toctree:[],article:{},mkd:"Markdown file is Loading..."}),c=((0,s.iH)(),e=>{f.api.get("api/article/"+e).then((e=>{n.article=e.data})).then((()=>{f.api.get(n.article.markdown).then((e=>{n.mkd=e.data}))}))});(0,l.bv)((()=>{c(t.params.id)}));const r=e=>{n.toctree=e},i=e=>{o.push({path:"/articles",query:{tag:e}})},m=e=>{document.getElementById(e).scrollIntoView({behavior:"smooth"})},d=e=>{setTimeout((()=>{m(e)}),10)};return(e,o)=>{const c=(0,l.up)("q-img"),p=(0,l.up)("q-icon"),u=(0,l.up)("q-btn"),g=(0,l.up)("q-space"),h=(0,l.up)("q-chip"),f=(0,l.up)("q-separator"),v=(0,l.up)("q-drawer"),y=(0,l.up)("q-page-sticky"),_=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(_,{class:"row justify-center"},{default:J((()=>[(0,l.Wm)(c,{src:(0,s.SU)(n).article.img,style:{height:"54vh",width:"100vd"}},null,8,["src"]),(0,l.Wm)("div",O,[(0,l.Wm)("div",$,[(0,l.Wm)("div",ee,[(0,l.Wm)(w,{toc_tree:(0,s.SU)(n).toctree,onAnchorto:m,class:"q-pt-lg tocarea toc-sticky"},null,8,["toc_tree"])]),(0,l.Wm)("div",te,[(0,l.Wm)("div",oe,[(0,l.Wm)(p,{size:"xs",color:"purple",name:"sell",class:"q-mt-sm q-mr-md"},{default:J((()=>[(0,l.Wm)(N.Z,{tip:"标签"})])),_:1}),((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)((0,s.SU)(n).article.tags,(e=>((0,l.wg)(),(0,l.j4)(u,{class:"q-py-none",flat:"","no-caps":"",dense:"",type:"a",onClick:t=>i(e),label:e},null,8,["onClick","label"])))),256)),(0,l.Wm)(g),(0,l.Wm)(h,{square:"",outline:"",class:"relative-top-right q-pr-none q-mr-none card_action"},{default:J((()=>[(0,l.Wm)(p,{class:"q-pr-sm",size:"xs",color:"orange",name:"update"}),(0,l.Uk)(" "+(0,a.zw)((0,s.SU)(q.dE)((0,s.SU)(n).article.update))+" ",1),(0,l.Wm)(N.Z,{tip:"最后更新时间"})])),_:1})]),(0,l.Wm)(f,{class:"q-my-sm bg-blue-grey-3"}),(0,l.Wm)(X,{mkd:(0,s.SU)(n).mkd,onToctree:r},null,8,["mkd"]),le,(0,l.Wm)(K,{class:"q-pt-lg",aid:(0,s.SU)(t).params.id.toString()},null,8,["aid"])])])]),(0,l.Wm)(v,{modelValue:(0,s.SU)(n).is_show_toc_sider,"onUpdate:modelValue":o[1]||(o[1]=e=>(0,s.SU)(n).is_show_toc_sider=e),width:"50vw",side:"right",overlay:"",class:"tocsider shadowonly",onClick:o[2]||(o[2]=e=>(0,s.SU)(n).is_show_toc_sider=!1)},{default:J((()=>[(0,l.Wm)(w,{toc_tree:(0,s.SU)(n).toctree,onAnchorto:d,class:"toc-sticky q-mx-md"},null,8,["toc_tree"])])),_:1},8,["modelValue"]),(0,l.Wm)(y,{class:"lt-sm",position:"bottom-right",style:{"z-index":"10"},offset:[28,80]},{default:J((()=>[(0,l.Wm)(u,{round:"",color:"purple",icon:"toc",class:"shadow-1",onClick:o[3]||(o[3]=e=>(0,s.SU)(n).is_show_toc_sider=!(0,s.SU)(n).is_show_toc_sider)})])),_:1})])),_:1})}}});var ae=o(4379),ne=o(7704),ce=o(4554),re=o(2901),ie=o(1007);se.__scopeId="data-v-f8437a6e";const me=se;h()(se,"components",{QPage:ae.Z,QImg:P.Z,QScrollArea:ne.Z,QIcon:ce.Z,QBtn:E.Z,QSpace:A.Z,QChip:p.Z,QSeparator:B.Z,QDrawer:re.Z,QPageSticky:ie.Z})}}]);